<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>For try</title>
</head>
<body>
    <div id="app" contenteditable="true">
        <p>Lorem ipsum <em class="class">dolor</em> sit amet, <b>quo lorem cetero epicurei id</b>, discere percipit qui ei. </p>
        <p>Lorem ipsum dolor sit amet, quo lorem cetero epicurei id, discere percipit qui ei. </p>
        <div style="color:red;"><p>Lorem ipsum dolor sit amet</p><br>
        <img id="image" src="https://picsum.photos/id/919/200/200" alt="randomimg"></div>
    </div >

    <script src="../src/index.ts"></script>
    <button onclick="e()">Click</button>
    <button onclick="m()">mirror try</button>

    <div id="mirror">
    </div>



    <script >

        // let p = DTM.toJson(document.getElementById("app"))
        // // console.log(p)
        // let d = DTM.toDom(p, "div")
        // // console.log(d)
        // document.body.append(d)
        let a = JSON.parse(`{"0":{"version":2},"1":{"node":"p","text":"Lorem ipsum ","childs":[{"node":"em","attr":[{"name":"class","value":"class"}],"text":"dolor"},{"node":"#text","text":" sit amet,⛏(5)"},{"node":"b","text":"quo lorem cetero epicurei id"},{"node":"#text","text":", discere percipit qui ei. "}]},"2":{"node":"p","text":"Lorem ipsum dolor sit amet, quo lorem cetero epicurei id, discere percipit qui ei. "},"3":{"node":"div","attr":[{"name":"style","value":"color:red;"}],"childs":[{"node":"p","text":"Lorem ipsum dolor sit amet"},{"node":"br"},{"node":"#text","text":"⛏(9)"},{"node":"img","attr":[{"name":"id","value":"image"},{"name":"src","value":"https://picsum.photos/id/919/200/200"},{"name":"alt","value":"randomimg"}]}]}}`)
        function e(e){

            let n = DTM.newInstance();
            a = n.toJson(document.getElementById("app"));
            console.log(`${JSON.stringify(a)}`)
        }
        function m(e){

            let n = DTM.newInstance();
            let c = n.toDom(a, 'div')
            document.getElementById("mirror").innerHTML = c.innerHTML
        }
    </script>

</body>
</html>